<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:local="using:JitHubV3.Presentation"
  xmlns:infra="using:JitHubV3.Presentation.Infrastructure">

  <!-- Dashboard design tokens (metrics only; no colors). -->

  <!-- Spacing scale -->
  <x:Double x:Key="DashboardSpacingXS">4</x:Double>
  <x:Double x:Key="DashboardSpacingS">8</x:Double>
  <x:Double x:Key="DashboardSpacingM">12</x:Double>
  <x:Double x:Key="DashboardSpacingL">16</x:Double>
  <x:Double x:Key="DashboardSpacingXL">24</x:Double>
  <x:Double x:Key="DashboardSpacing2XL">32</x:Double>
  <x:Double x:Key="DashboardSpacing3XL">48</x:Double>
  <x:Double x:Key="DashboardSpacing4XL">64</x:Double>

  <!-- Common thickness tokens -->
  <Thickness x:Key="DashboardEdgePadding">16</Thickness>
  <Thickness x:Key="DashboardContentPadding">16</Thickness>
  <Thickness x:Key="DashboardContentPaddingWithComposeClearance">16,16,16,112</Thickness>
  <Thickness x:Key="DashboardComposeMargin">16</Thickness>
  <Thickness x:Key="DashboardComposePadding">16</Thickness>

  <!-- Repo list metrics -->
  <Thickness x:Key="DashboardRepoItemPadding">12,8,12,8</Thickness>

  <!-- Corner radius -->
  <CornerRadius x:Key="DashboardRadiusS">8</CornerRadius>
  <CornerRadius x:Key="DashboardRadiusM">12</CornerRadius>
  <CornerRadius x:Key="DashboardRadiusL">16</CornerRadius>

  <!-- Elevation (Z translation values) -->
  <x:Double x:Key="DashboardElevationCard">8</x:Double>
  <x:Double x:Key="DashboardElevationCompose">16</x:Double>
  <x:Double x:Key="DashboardElevationFloating">24</x:Double>

  <!-- Common size constraints -->
  <x:Double x:Key="DashboardComposeMaxWidth">720</x:Double>

  <!-- Responsive breakpoint: switches Grid â†” Deck. -->
  <x:Double x:Key="DashboardGridToDeckMinWidth">900</x:Double>

  <!-- Card container style (Phase 6.1) -->
  <Style x:Key="DashboardCardContainerStyle" TargetType="Border">
    <Setter Property="Background" Value="{ThemeResource SolidBackgroundFillColorBaseBrush}" />
    <Setter Property="BorderBrush" Value="{ThemeResource CardStrokeColorDefaultBrush}" />
    <Setter Property="BorderThickness" Value="1" />
    <Setter Property="CornerRadius" Value="{StaticResource DashboardRadiusM}" />
    <Setter Property="Padding" Value="{StaticResource DashboardEdgePadding}" />
    <Setter Property="infra:DashboardElevation.Z" Value="{StaticResource DashboardElevationCard}" />
    <Setter Property="Shadow">
      <Setter.Value>
        <ThemeShadow />
      </Setter.Value>
    </Setter>
  </Style>

  <!-- Common converters for templates -->
  <local:StringNullOrWhiteSpaceToVisibilityConverter x:Key="DashboardStringNullOrWhiteSpaceToVisibilityConverter" />
  <local:CollectionNullOrEmptyToVisibilityConverter x:Key="DashboardCollectionNullOrEmptyToVisibilityConverter" />
  <infra:CardTintVariantToBrushConverter x:Key="DashboardCardTintVariantToBrushConverter" />

  <!-- Card template (Phase 6.2) -->
  <DataTemplate x:Key="DashboardCardTemplate">
    <Border Style="{StaticResource DashboardCardContainerStyle}"
            Padding="0"
            AutomationProperties.Name="{Binding Title}">
      <Grid>
        <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                CornerRadius="{StaticResource DashboardRadiusM}" />

        <Border Background="{Binding TintVariant, Converter={StaticResource DashboardCardTintVariantToBrushConverter}}"
                CornerRadius="{StaticResource DashboardRadiusM}" />

        <Grid Padding="{StaticResource DashboardEdgePadding}"
              RowDefinitions="Auto,*,Auto"
              RowSpacing="{StaticResource DashboardSpacingS}">

          <StackPanel Grid.Row="0" Spacing="{StaticResource DashboardSpacingXS}">
            <TextBlock Text="{Binding Title}"
                       Style="{ThemeResource TitleTextBlockStyle}"
                       TextWrapping="Wrap" />

            <TextBlock Text="{Binding Subtitle}"
                       Visibility="{Binding Subtitle, Converter={StaticResource DashboardStringNullOrWhiteSpaceToVisibilityConverter}}"
                       Style="{ThemeResource BodyTextBlockStyle}"
                       Opacity="0.72"
                       TextWrapping="Wrap" />
          </StackPanel>

          <TextBlock Grid.Row="1"
                     Text="{Binding Summary}"
                     Visibility="{Binding Summary, Converter={StaticResource DashboardStringNullOrWhiteSpaceToVisibilityConverter}}"
                     Style="{ThemeResource BodyTextBlockStyle}"
                     Opacity="0.72"
                     TextWrapping="Wrap"
                     TextTrimming="CharacterEllipsis"
                     MaxLines="4" />

          <ItemsControl Grid.Row="2"
                        ItemsSource="{Binding Actions}"
                        Visibility="{Binding Actions, Converter={StaticResource DashboardCollectionNullOrEmptyToVisibilityConverter}}">
            <ItemsControl.ItemsPanel>
              <ItemsPanelTemplate>
                <StackPanel Orientation="Horizontal"
                            Spacing="{StaticResource DashboardSpacingS}" />
              </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>

            <ItemsControl.ItemTemplate>
              <DataTemplate>
                <Button Content="{Binding Label}"
                        Command="{Binding Command}"
                        MinHeight="44"
                        AutomationProperties.Name="{Binding Label}" />
              </DataTemplate>
            </ItemsControl.ItemTemplate>
          </ItemsControl>

        </Grid>
      </Grid>
    </Border>
  </DataTemplate>

</ResourceDictionary>
